<!DOCTYPE html>
<html lang="pt-BR">
  <link
    rel="icon"
    type="image/png"
    href="./favicon/favicon-96x96.png"
    sizes="96x96"
  />
  <link rel="icon" type="image/svg+xml" href="./favicon/favicon.svg" />
  <link rel="shortcut icon" href="./favicon/favicon.ico" />
  <link
    rel="apple-touch-icon"
    sizes="180x180"
    href="./favicon/apple-touch-icon.png"
  />
  <link rel="manifest" href="./favicon/site.webmanifest" />
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Rods Company</title>

    <meta
      name="description"
      content="Rods Company - Transformando desafios em sucesso h치 mais de 7 anos."
    />
    <meta
      name="keywords"
      content="Rods Company, Transforma칞칚o, Sucesso, Desafios, Tecnologia"
    />
    <meta name="author" content="Rodrigo Gomes Santos" />
    <!-- Fontes -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans:ital,wght@0,100..700;1,100..700&family=Quicksand:wght@300..700&family=Roboto+Condensed&family=Source+Serif+4:ital,opsz,wght@0,8..60,200..900;1,8..60,200..900&display=block"
      rel="stylesheet"
    />

    <style>
      body {
        margin: 0;
        overflow: hidden;
        background: #01020a;
        position: relative;
        height: 100vh;
        width: 100%;
      }

      canvas {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: 1;
      }

      #scene,
      #overlay-content {
        opacity: 0;
        transition: opacity 2s ease-out;
      }

      /* Style for the overlay content div */
      #overlay-content {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: 10;
        display: flex; /* Keep flexbox for main layout */
        flex-direction: column; /* Stack children vertically */
        align-items: center; /* Center children horizontally */
        /* Remove justify-content: center; */ /* Don't center the whole block vertically */
        color: white;
        font-family: 'IBM Plex Sans', sans-serif;
        pointer-events: none; /* Allow clicks to pass through empty space */
        padding: 20px; /* Add padding to edges */
        padding-top: 8rem;
        box-sizing: border-box;
      }

      /* Re-enable pointer events for interactive elements */
      #overlay-content > * {
        pointer-events: auto;
      }

      .persuasive-headline {
        font-weight: 400;
        font-size: clamp(24px, 5vw, 60px);
        margin-bottom: 8px;
        text-align: center;
        font-family: 'Source Serif 4', serif;
        margin-top: 0; /* Start from the top padding */
        /* Remove large margin-bottom */
      }

      .sub-headline {
        font-weight: 400;
        font-size: clamp(14px, 2vw, 24px);
        color: #6b6b6b;
        margin-top: 0;
        /* Remove large margin-bottom */
        /* Adjust margin based on desired spacing relative to the Three.js text */
        margin-bottom: 25vh; /* Example: position it visually above center */
        text-align: center;
      }

      /* The main text "RODS COMPANY" is still rendered by Three.js */

      /* Style for the bottom content container (CTA and Social Links) */
      .cta-section {
        position: absolute; /* Position relative to #overlay-content */
        bottom: 4rem; /* Anchor 20px from the bottom */
        left: 0; /* Align to the left edge */
        width: 100%; /* Span the full width */
        display: flex; /* Use flexbox to arrange its content */
        flex-direction: column; /* Stack button and links vertically */
        align-items: center; /* Center button and links horizontally within this full-width container */
        /* Remove margin-top */
        pointer-events: auto; /* Ensure this whole section is clickable */
      }

      .cta-button {
        display: inline-block;
        font-weight: 400;
        text-transform: uppercase;
        font-size: clamp(16px, 2.5vw, 20px);
        color: rgb(255, 255, 255);
        background: #f50c66;
        padding: 10px 20px;
        border-radius: 30px;
        text-decoration: none;
        margin-bottom: 15px; /* Space between button and links */
        transition: background 0.3s ease;
        /* Remove float/positioning relative to text, centered by parent flexbox */
      }

      .cta-button:hover {
        background: #e00a5a; /* Slightly darker on hover */
      }

      .social-links {
        display: flex; /* Arrange links horizontally */
        gap: 50px; /* Space between social links */
        /* Centered by parent .cta-section's align-items: center */
      }

      .social-link {
        font-weight: 300;
        font-size: clamp(14px, 1.8vw, 15px);
        color: #aaaaaa;
        text-decoration: none;
        transition: color 0.3s ease, text-decoration 0.3s ease;
      }

      .social-link:hover {
        color: white;
        text-decoration: underline;
      }



      :root {
        /* Fundo geral da janela de chat */
          --chat--window--background: #01020a;
            --chat--body--background: #01020a;
              --chat--footer--background: #01020a;
              
                /* Header */
                  --chat--header--background: #01020a;
                    --chat--header--color: #f2f4f8;
                    
                      /* Borda da janela */
                        --chat--window--border: 1px solid #20202a;
                        
                          /* Mensagens do bot */
                            --chat--message--bot--background: #13131e;
                              --chat--message--bot--color: #e0e0e0;
                              
                                /* Mensagens do usu치rio (acento rosa) */
                                  --chat--message--user--background: #f50c66;
                                    --chat--message--user--color: #ffffff;
                                    
                                      /* Campo de texto */
                                        --chat--textarea--background: #13131e;
                                          --chat--input--text-color: #e0e0e0;
                                            --chat--input--placeholder--font-size: 1rem;
                                              /* se precisar mudar a cor do placeholder: */
                                                --chat--input--placeholder--color: #777980;
                                                
                                                  /* Bot칚o de toggle (rosa transl칰cido) */
                                                    --chat--toggle--background: rgba(245,12,102,0.8);
                                                      --chat--toggle--hover--background: rgba(245,12,102,1);
                                                        --chat--toggle--color: #ffffff;
                                                        
                                                          /* Para rolar discretamente */
                                                            --chat--messages-list--padding: 0.5rem;
                                                            
                                                              /* Ajuste de sombras e bordas arredondadas */
                                                                --chat--border-radius: 0.5rem;
                                                                  --chat--toggle--size: 56px;
                                                                  }

                                                                  /* Garante que fique sobre tudo */
                                                                  .n8n-chat-widget,
                                                                  .n8n-chat-widget * {
                                                                    z-index: 10000 !important;
                                                                    }

                                                                    /* Scrollbar personalizado mais discreto */
                                                                    .n8n-chat-window .messages-list::-webkit-scrollbar {
                                                                      width: 6px;
                                                                      }
                                                                      .n8n-chat-window .messages-list::-webkit-scrollbar-thumb {
                                                                        background: rgba(255,255,255,0.1);
                                                                          border-radius: 3px;
                                                                          }

                                                                          /* Esconde o logo padr칚o se quiser ainda mais clean */
                                                                          .n8n-chat-window .header-logo {
                                                                            display: none !important;
                                                                            }
    </style>

    <!-- Add the Import Map here -->
    <script type="importmap">
      {
        "imports": {
          "three": "https://unpkg.com/three@0.150.1/build/three.module.js",
          "three/examples/jsm/": "https://unpkg.com/three@0.150.1/examples/jsm/"
        }
      }
    </script>

    <link href="https://cdn.jsdelivr.net/npm/@n8n/chat/dist/style.css" rel="stylesheet" /> <!-- estilos do widget --> :contentReference[oaicite:0]{index=0}

  </head>
  <body>
    <!-- The Three.js canvas (background effect) -->
    <canvas id="scene"></canvas>

    <!-- The overlay content -->
    <div id="overlay-content">
      <!-- T칤tulo principal persuasivo -->
      <h1 class="persuasive-headline">N칚o 칠 seu problema. 칄 nosso!</h1>
      <!-- Subt칤tulo adicionando contexto -->
      <p class="sub-headline">
        H치 mais de 7 anos transformando desafios em sucesso.
      </p>

      <!-- The Three.js text ("RODS COMPANY") will appear visually in the center -->
<div>
  <!-- <iframe src="https://n8n.rods.company/webhook/091b2c03-2114-4d13-b308-a1bf725c33d0/chat" frameborder="0"></iframe> -->
</div>
      <!-- The CTA and Social Links section, positioned at the bottom -->
      <div class="cta-section">
        <!-- <a href="#contact" class="cta-button">Entrar em Contato</a> -->
        <div class="social-links">
          <a
            href="https://www.behance.net/rodrigomes"
            class="social-link"
            target="_blank"
            rel="noopener noreferrer"
            >Behance</a
          >
          <!-- Added target and rel -->
          <a
            href="https://www.linkedin.com/in/rodrigomesantos/"
            class="social-link"
            target="_blank"
            rel="noopener noreferrer"
            >LinkedIn</a
          >
          <a
            href="https://github.com/rodrigogomesantos"
            class="social-link"
            target="_blank"
            rel="noopener noreferrer"
            >GitHub</a
          >
        </div>
      </div>
    </div>

    <script type="module">
      // Now import using the bare/path specifiers defined in the import map
      import * as THREE from 'three';
      import { EffectComposer } from 'three/examples/jsm/postprocessing/EffectComposer.js';
      import { RenderPass } from 'three/examples/jsm/postprocessing/RenderPass.js';
      import { UnrealBloomPass } from 'three/examples/jsm/postprocessing/UnrealBloomPass.js';

      // --- Three.js Text Rendering Setup ---
      const textCanvas = document.createElement('canvas');
      const ctx = textCanvas.getContext('2d');
      const mainText = 'RODS COMPANY'; // Text rendered by Three.js

      function updateBars() {
        const w = window.innerWidth;
        let bars;
        if (w < 480) {
          bars = 20;
        } else if (w < 768) {
          bars = 40;
        } else {
          bars = 60;
        }
        uniforms.bars.value = bars;
      }




      function resizeTextCanvas() {
        const baseWidth = 1920;
        const baseHeight = 1080;
        const scale = Math.min(
          window.innerWidth / baseWidth,
          window.innerHeight / baseHeight
        );

        textCanvas.width = baseWidth * scale;
        textCanvas.height = baseHeight * scale;

        const fontSize = baseWidth * 0.12 * scale;
        ctx.clearRect(0, 0, textCanvas.width, textCanvas.height);
        // Use 'Roboto Condensed' for the main Three.js text effect as before
        ctx.font = `900 ${fontSize}px 'Roboto Condensed'`;
        ctx.textAlign = 'center';
        ctx.textBaseline = 'middle';
        ctx.fillStyle = 'white';
        ctx.fillText(mainText, textCanvas.width / 2, textCanvas.height / 2);
      }
      resizeTextCanvas(); // Initial draw

      const textTexture = new THREE.CanvasTexture(textCanvas);
      textTexture.minFilter = THREE.LinearFilter;
      textTexture.magFilter = THREE.LinearFilter;
      textTexture.wrapS = THREE.ClampToEdgeWrapping;
      textTexture.wrapT = THREE.ClampToEdgeWrapping;

      // Setup Three.js renderer, scene, camera
      const scene = new THREE.Scene();
      const camera = new THREE.OrthographicCamera(-1, 1, 1, -1, 0, 1);
      const renderer = new THREE.WebGLRenderer({
        antialias: true,
        alpha: true,
        canvas: document.getElementById('scene'),
      });
      renderer.setClearColor(0x000000, 0);
      renderer.setSize(window.innerWidth, window.innerHeight);

      // Post-processing composer
      const composer = new EffectComposer(renderer);
      composer.addPass(new RenderPass(scene, camera));
      const bloomPass = new UnrealBloomPass(
        new THREE.Vector2(window.innerWidth, window.innerHeight),
        2.5, // strength
        0.8, // radius
        0.975 // threshold
      );
      composer.addPass(bloomPass);

      // Shader uniforms
      const uniforms = {
        time: { value: 0 },
        resolution: {
          value: new THREE.Vector2(window.innerWidth, window.innerHeight),
        },
        bars: { value: 60 },
        textTex: { value: textTexture },
        chroma: { value: 0.001 },
        threshold: { value: 0.1 },
        fogDensity: { value: 0.1 },
        fogSpeed: { value: 0.15 },
        fogScale: { value: 3.0 },
        noiseIntensity: { value: 0.18 },
      };

      const material = new THREE.ShaderMaterial({
        uniforms,
        transparent: true,
        vertexShader: `
        varying vec2 vUv;
        void main() {
          vUv = (position.xy * 0.5) + 0.5;
          gl_Position = vec4(position, 1.0);
        }
      `,
        fragmentShader: `
        precision highp float;
        uniform float time;
        uniform vec2 resolution;
        uniform float bars;
        uniform sampler2D textTex;
        uniform float chroma;
        uniform float threshold;
        uniform float fogDensity;
        uniform float fogSpeed;
        uniform float fogScale;
        uniform float noiseIntensity;
        varying vec2 vUv;

        float rand(vec2 co) {
          return fract(sin(dot(co, vec2(12.9898,78.233))) * 43758.5453);
        }

        void main() {
          float idx = floor(vUv.x * bars);
          float center = (idx + 0.5) / bars;
          float baseOff = sin(time + idx * 0.7) * 0.02;
          float offR = baseOff + chroma;
          float offG = baseOff;
          float offB = baseOff - chroma;

          float d = abs(vUv.x - center);
          float stripeMask = smoothstep(1.0/bars, 0.0, d);

          vec2 uvR = vUv + vec2(offR, 0.0);
          vec2 uvG = vUv + vec2(offG, 0.0);
          vec2 uvB = vUv + vec2(offB, 0.0);

          float r = texture2D(textTex, uvR).r;
          float g = texture2D(textTex, uvG).r;
          float b = texture2D(textTex, uvB).r;

          vec3 baseColor = vec3(r, g, b);

          // Fog
          float fogTimeOffset = sin(time * fogSpeed) * 0.1;
          float fogVisibility = smoothstep(0.3, 0.7, vUv.y + fogTimeOffset);
          float fogPatternNoise = rand(vUv * fogScale + time * fogSpeed * 0.5);
          vec3 finalColor = mix(baseColor, vec3(1.0), fogVisibility * fogPatternNoise * fogDensity);

          // Text mask & alpha
          const float textEdgeSmoothness = 0.08;
          float textValue = (r + g + b) / 3.0;
          float smoothedTextMask = smoothstep(threshold - textEdgeSmoothness, threshold + textEdgeSmoothness, textValue);
          float alpha = stripeMask * smoothedTextMask;

          // Screen noise
          float screenNoise = rand(vUv * vec2(resolution.x / resolution.y, 1.0) * 3.0 + time * 0.2);
          finalColor.rgb += vec3(screenNoise - 0.5) * noiseIntensity;

          finalColor = clamp(finalColor, 0.0, 1.0);
          alpha = clamp(alpha, 0.0, 1.0);

          gl_FragColor = vec4(finalColor, alpha);
        }
      `,
      });

      scene.add(new THREE.Mesh(new THREE.PlaneGeometry(2, 2), material));

      // --- Parallax Effect (Applied to the Text Canvas) ---
      window.addEventListener('mousemove', (e) => {
        const dx = (0.5 - e.clientX / window.innerWidth) * 20; // Sensitivity 20 pixels
        const dy = (0.5 - e.clientY / window.innerHeight) * 20; // Sensitivity 20 pixels

        // Reset transform, clear, apply new transform, draw
        ctx.setTransform(1, 0, 0, 1, 0, 0); // Reset transform
        ctx.clearRect(0, 0, textCanvas.width, textCanvas.height); // Clear the whole canvas
        ctx.setTransform(1, 0, 0, 1, dx, dy); // Apply new transform

        // Recompute font size based on texture size relative to window for drawing accuracy
        const baseWidth = 1920;
        const scale = textCanvas.width / baseWidth; // Get the scale factor used in resizeTextCanvas
        const fontSize = baseWidth * 0.12 * scale; // Recompute font size

        ctx.font = `900 ${fontSize}px 'Roboto Condensed'`;
        ctx.textAlign = 'center';
        ctx.textBaseline = 'middle';
        ctx.fillStyle = 'white';
        ctx.fillText(mainText, textCanvas.width / 2, textCanvas.height / 2); // Draw at the *original* center

        textTexture.needsUpdate = true; // Tell Three.js the texture needs to be re-uploaded
      });
          // No evento resize, junto com o resto
      window.addEventListener('resize', () => {
        resizeTextCanvas();
        textTexture.needsUpdate = true;
        renderer.setSize(window.innerWidth, window.innerHeight);
        uniforms.resolution.value.set(window.innerWidth, window.innerHeight);
        composer.setSize(window.innerWidth, window.innerHeight);

        // aqui:
        updateBars();
      });

            // No in칤cio, antes do animate()
      updateBars();


      // Animation loop
      function animate() {
        requestAnimationFrame(animate);
        uniforms.time.value += 0.01;
        composer.render();
      }
      animate();

      // Handle window resizing
      window.addEventListener('resize', () => {
        // Update text canvas and texture
        resizeTextCanvas();
        textTexture.needsUpdate = true;

        // Update renderer size
        renderer.setSize(window.innerWidth, window.innerHeight);

        // Update resolution uniform in shader
        uniforms.resolution.value.set(window.innerWidth, window.innerHeight);

        // Update composer size
        composer.setSize(window.innerWidth, window.innerHeight);

        // Flexbox and absolute positioning handle overlay content re-layout automatically
      });

      window.addEventListener('load', () => {
        // d치 um pequeno delay para garantir que tudo esteja pronto
        setTimeout(() => {
          document.getElementById('scene').style.opacity = '1';
          document.getElementById('overlay-content').style.opacity = '1';
        }, 100);
      });
    </script>
    <script type="module">
  import { createChat } from 'https://cdn.jsdelivr.net/npm/@n8n/chat/dist/chat.bundle.es.js';  /* bundle ES */
  
  createChat({
    webhookUrl: 'https://n8n.rods.company/webhook/091b2c03-2114-4d13-b308-a1bf725c33d0/chat',
    showWelcomeScreen: false,
    defaultLanguage: 'en',
    initialMessages: [
       	'Ol치? 游녦',
            		'Me conte sobre o seu problema que eu vou te guiar de como podemos te ajudar!'
    ],
    i18n: {
      		en: {
          	    title: 'AI Assistent',
                subtitle: "Nao precisa esperar, estou aqui 24/7 para te ajudar.",
                footer: '',
                getStarted: 'Nova conversa',
                inputPlaceholder: 'Digite aqui sua duvida...',
              },
          },
  });
</script>
  </body>
</html>
